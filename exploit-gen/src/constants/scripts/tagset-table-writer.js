import fs from 'fs';
import path from 'path';

const dataFilePath = path.join('./', '../thething-markups/tag-sets.json');
const data = JSON.parse(fs.readFileSync(dataFilePath, 'utf8'));

// Start writing LaTeX table
let latexTable = `
\\captionsetup[table]{skip=5pt}
\\begin{table}[!t]
\\centering
\\begin{tabular}{l|p{0.8\\columnwidth}}
 \\small \\textbf{Set}
 &\\includesvg[height=0.35cm]{images/table-header-icons/tag.svg}\\xspace\\xspace \\small \\textbf{HTML Tags} \\\\
\\toprule
`;

Object.keys(data).forEach(key => {
  latexTable += `\\small \\texttt{${key}} & \\tiny {${data[key]}} \\\\\n\\midrule\n`;
});

// Remove the last \\midrule and close the table
latexTable = latexTable.trim().replace(/\\midrule$/, '');
latexTable += `
\\bottomrule
\\end{tabular}
\\begin{flushleft}
\\vspace{-5pt}
\\vspace{-5pt}
\\end{flushleft}
\\caption{List of HTML tags used in Table~\\ref{table:dom-constraints} that share the same DOM Clobbering behavior.}
\\label{appendix:tag-attribute-set}
\\end{table}
`;

// Write the LaTeX table to a file
fs.writeFileSync('output_table.tex', latexTable);